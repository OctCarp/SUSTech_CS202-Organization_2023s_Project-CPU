## SUSTech_CS202-Organization_2023s_Project-CPU

#### 小组成员：徐春晖，郭健阳，唐培致

> 源码托管于 GitHub，将在项目 ddl 结束后基于 **MIT License** 协议开源，访问链接：
>
> https://github.com/OctCarp/SUSTech_CS202-Organization_2023s_Project-CPU

------

### 开发者说明

| 姓名       | 学号         | 负责内容                                            | 贡献比 |
| ---------- | ------------ | --------------------------------------------------- | ------ |
| **徐春晖** | **12110304** | CPU 硬件的实现和测试，场景 1 汇编编写，VGA 模式输出 |        |
| **郭健阳** | **12111506** | 场景 2 汇编编写，汇编代码测试                       |        |
| **唐培致** | **12110502** | 键盘输入，七段数码显示管输出                        |        |

### 版本修改记录



------

### CPU 架构设计说明

#### 1. CPU特性：

- **ISA**：

  | R-Type | op      | regs | shamt    | funct    | 使用方式 |
  | ------ | ------- | ---- | -------- | -------- | -------- |
  | add    | `00000` |      | `000000` | `000110` |          |
  |        |         |      |          |          |          |
  |        |         |      |          |          |          |

  | I-Type | op        | {regs,imm} | 使用方式 |
  | ------ | --------- | ---------- | -------- |
  | addi   | `0010000` |            |          |
  |        |           |            |          |
  |        |           |            |          |

  | J-Type | op       | addr | 使用方式                                                     |
  | ------ | -------- | ---- | ------------------------------------------------------------ |
  | j      | `000010` |      | 跳转到某个标签对应的 **PC** 值                               |
  | jal    | `000010` |      | 跳转到某个标签对应的 **PC** 值，并将当前 **PC + 4** 存入 **$ra** 寄存器中 |

- 参考的 ISA：**MiniSys-1A，MIPS**

- 寻址空间设计：使用了哈佛结构。指令中寻址单位为字节，实际中以字为数据位宽，即指令空间和数据空间读写位宽均为 **32 bits**，读写深度均为 **16384**

- 外设 IO 支持：采用 MMIO 外设对应的寻址范围为 0xFFFFFFC00 起，地址末 4bit 值分别为：

  - | IO 设备             | 地址末 4bit |
    | ------------------- | ----------- |
    | 开关输入 低八位     | 0x0         |
    | 开关输入 中八位     | 0x1         |
    | 开关输入 高八位     | 0x2         |
    | 确认按钮输入        | 0x3         |
    | 键盘输入            | 0x9         |
    | LED 灯输出 低 8 位  | 0x0         |
    | LED 灯输出 中 8 位  | 0x1         |
    | LED 灯输出 高 8 位  | 0x2         |
    | LED 灯输出 低 16 位 | 0x3         |
    | 七段数码显示输出    | 0x8         |
    | VGA 输出            | 0x7         |
    

- CPU 为单周期 CPU，CPI 接近为 1，不支持 Pipeline


#### 2.CPU 接口：

| 引脚 | 规格    | 名称               | 功能      |
| ---- | ------- | ------------------ | --------- |
| Y18  | `input` | `fpga_clk`         | FPGA 时钟 |
|      |         |                    |           |
|      |         |                    |           |
|      |         |                    |           |
|      |         |                    |           |
|      |         |                    |           |
|      |                |            |                   |
|      |                |            |                   |
|      |                |            |                   |
|      |                |            |                   |
|      |                |            |                   |
|      |                |            |                   |
|      |                |            |                   |
|      |                |            |                   |
|      |                |            |                   |
| OMTD  | `output[11:0]` | `v_vga`              | VGA RGB 信号        |
| L21   | `output`       | `v_hs`               | VGA 水平同步 信号   |
| H21   | `output`       | `v_vs`               | VGA 垂直同步 信号   |

#### 3.CPU 内部结构：

CPU 顶层：

![CPU](img/CPU.png)



### 测试说明



### 问题及总结



------

### Bonus 对应功能点的设计说明

#### 1.设计思路及与周边模块的关系



#### 2.核心代码及必要说明



### Bonus 测试说明



### Bonus 问题与总结



------

### 项目报告到此结束，感谢您的阅读！
